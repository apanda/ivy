<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      IVY &middot; Interactive Verification of Paramterized Systems
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="public/css/poole.css?2016-02-14T23:49:58-08:00">
  <link rel="stylesheet" href="public/css/syntax.css?2016-02-14T23:49:58-08:00">
  <link rel="stylesheet" href="public/css/hyde.css?2016-02-14T23:49:58-08:00">
  <link href='//fonts.googleapis.com/css?family=Josefin+Slab:400,600,700,300italic,400italic,600italic,700italic' rel='stylesheet' type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <script type="text/javascript"
    src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script type="text/javascript">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ['\\(','\\)'] ]
      }
    });
  </script>
</head>


  <body class="layout-reverse theme-base-0d">
    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          IVY
        </a>
      </h1>
    </div>
    <a class="sidebar-nav-item" href="index.html#downloading">Downloading and Getting Started</a>
    <a class="sidebar-nav-item" href="index.html#bmc">Using Bounded Model Checking</a>
    <a class="sidebar-nav-item" href="index.html#inductive">Inductive Invariants for Leader Election</a>
    <a class="sidebar-nav-item" href="index.html#lswitch">Inductive Invariants for Learning Switch</a>
    <a class="sidebar-nav-item" href="http://www.cs.tau.ac.il/~odedp/ivyvm.tar.bz2">Download VM</a>
  </div>
</div>


    <div class="content container">
      <p>Thank you for your interest in Ivy. We provide Ivy as a <a href="https://www.virtualbox.org">VirtualBox</a> <a href="http://www.cs.tau.ac.il/~odedp/ivyvm.tar.bz2">virtual machine</a>. Running our VM requires that at least 2 GB of memory be available.</p>

<h2 id="a-hrefdownloadingadownloading-and-getting-started"><a href="downloading"></a>Downloading and Getting Started</h2>
<p>Let us get started by downloading and starting IVY:</p>

<ol>
  <li>Download and install <a href="https://www.virtualbox.org">VirtualBox</a> for your VM.</li>
  <li>Download<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> the <a href="http://www.cs.tau.ac.il/~odedp/ivyvm.tar.bz2">VM</a> archive.</li>
  <li>Untar the archive, on Linux and OS X this can be done by running <code class="highlighter-rouge">tar -jxvf ivyvm.tar.bz2</code> in the directory to which you downloaded the archive. On Windows, you can use <a href="http://www.7-zip.org/download.html">7Zip</a> to do so.</li>
  <li>Once untarred, use VirtualBox to open the <code class="highlighter-rouge">ivyvm.vbox</code> file, and start the VM.</li>
  <li>Once booted, log into the VM with the username <code class="highlighter-rouge">ivyuser</code> and password <code class="highlighter-rouge">ivy</code>.</li>
  <li>Once logged in start Firefox (you can click on the icon on the left bar).</li>
  <li>Next open a terminal and type <code class="highlighter-rouge">cd ~/ivy/examples/pldi16</code> and hit enter. This will take you to a directory containing several Ivy examples.</li>
</ol>

<h2 id="a-namebmcausing-bounded-model-checking-to-check-models"><a name="bmc"></a>Using Bounded Model Checking to Check Models</h2>
<p>We begin by looking at a [ring based leader election protocol] (http://cs.ucsb.edu/~hatem/cs271/decentralized-extrema-finding.pdf) previous described by Chang and Roberts. In this protocol, each node is assigned a unique ID. Each node sends a message containing its ID to its neighbor. Nodes forwards a received message if and only if the ID contained in the message is greater than their own ID. Any node which receives its own message is then declared to be the leader.  In this example we check two conjectures: (1) exactly one node considers itself the leader, and (2) the leader has the highest ID in the ring.</p>

<p>We begin by looking at how Ivy can be used during the specification phase. For this demonstration we have included a buggy version of the specification, where we do not require nodes to have unique IDs. This of course breaks the leader election protocol. To see how Ivy’s bounded model checking can help with this run <code class="highlighter-rouge">python ../../ivy/ivy_bmc.py leader_election_ring_bug.py</code> in the previously opened terminal window. This should result in a <a href="http://jupyter.org/">Jupyter</a> notebook opening in Firefox as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/bmc-highlighted.png" alt="Ivy started" /></p>

<p>Click on the run cell button (highlighted in the picture above) to start bounded model checking. This will shortly produce a violation as shown below</p>

<p><img src="https://apanda.github.com/ivy/assets/bmc-start.png" alt="BMC violation" /></p>

<p>The Ivy Main window indicates that a counter example was found with 4 transitions (the 0th state is a dummy initial state). Click on state 4 to see the transition resulting in the violation. As shown below, the text box in the Ivy Main window shows the various relations leading up to this violation. We can also use the Transition View Widget to get a more visual representation. To do this click on the + icon in the Transition View Widget (highlighted below), this results in Ivy showing vertices representing all binary relations in the model.</p>

<p><img src="https://apanda.github.com/ivy/assets/bmc-selected-highlight.png" alt="BMC violation highlighted" /></p>

<p>As is readily apparent our model is wrong since both node0 and node1 in this example have the same ID. This can be fixed by adding an axiom to the model, which we have done in the file <code class="highlighter-rouge">leader_election_ring.py</code>. We use this in the next section.</p>

<h2 id="a-nameinductiveafinding-inductive-invariants-for-leader-election"><a name="inductive"></a>Finding Inductive Invariants for Leader Election</h2>
<p>Now that we have a correct model, it is time to get inductive invariants for this system. To do this start by killing (using <code class="highlighter-rouge">ctrl-c</code>) the previous Jupyter session, and run <code class="highlighter-rouge">python ../../ivy/ivy2.py leader_election_ring.ivy</code>. This will again result in a Jupyter notebook opening. Once the notebook is open run the cell, this will again result in two windows: Ivy Main and Transition View Widget. We start by checking if our model is already inductive, to do this click the “Check Inductiveness” button in the Transition View Widget. This will result in Ivy finding a counter example showing that the invariants are not inductive, as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/noninductive1.png" alt="Leader ordering is not inductive" /></p>

<p>We then highlight the set of conditions that seem to not fit into the model in this transition: check the boxes to see the <code class="highlighter-rouge">idn</code> (ID assigned to a node), <code class="highlighter-rouge">le</code> (ordering relation between IDs), <code class="highlighter-rouge">pending</code> (pending messages) and <code class="highlighter-rouge">leader</code> relations as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/ninductive-relations.png" alt="Transition for non-inductiveness" /></p>

<p>The problem here is that <code class="highlighter-rouge">node1</code> has a pending message with its ID, even though its ID is not the highest possible ID. This should be impossible, and we need to strengthen our model with this.</p>

<p>To begin strengthening, select all the arrows and nodes in the left transition window and click Gather Facts to collect all the relations that hold as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/gatherfacts1.png" alt="Gather facts" /></p>

<p>We can now use Bounded Model Checking to reduce these facts to a minimal form, using the Minimize Conjecture function in Ivy. Ivy should then produce a conjecture as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/conjecture1.png" alt="New conjecture" /></p>

<p>This conjecture in fact disallows the problem we identified before, and is hence what we wanted. We can now proceed by adding this to our list of conjectures by clicking on the Strengthen button in the Transition View.</p>

<p>We can then proceed by again trying to Check Inductiveness. This time Ivy indicates that the previously added conjecture is not inductive as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/ninductive2.png" alt="Added conjecture is not inductive" /></p>

<p>The problem is not immediately obvious this time, so we need to also show the <code class="highlighter-rouge">ring.le</code> relation, which corresponds with ring topology as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/ninductive2-more-rel.png" alt="Added conjecture is not inductive with more relations" /></p>

<p>Now the problem is apparent. Our previous conjecture does not require that messages follow the ring topology. In this case, node1 has received node0’s ID, despite the fact that had this message followed the ring topology, it would have not have been received. We can again use Gather Facts and Minimize Conjecture to generate a conjecture corresponding to our observation as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/conjecture2.png" alt="Conjecture 2" /></p>

<p>Observe that in the previous screenshot, <code class="highlighter-rouge">id0</code> is unselected and no green edges connect it to a node. This is to indicate that it was not included in the minimized conjecture. The dashed blue edge indicates that <code class="highlighter-rouge">id1</code> and <code class="highlighter-rouge">id2</code> are not equal, note that this is a part of the minimized conjecture.</p>

<p>We can again check inductiveness, resulting in another case where the previous conjecture is non-inductive because it doesn’t account for some of the ring topology. The non-inductive conjecture and the conjecture we add to make it inductive are shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/ninductive3.png" alt="Added conjecture is not inductive" />
<img src="https://apanda.github.com/ivy/assets/conjecture3.png" alt="Conjecture 3" /></p>

<p>Finally we need to repeat this process one more time to arrive at an inductive invariant that can be used to prove correctness for this system. When inductive invariants are found Ivy informs as shown below.</p>

<p><img src="https://apanda.github.com/ivy/assets/inductive1.png" alt="Inductive invariants found" /></p>

<h2 id="a-namelswitchafinding-inductive-invariants-for-learning-switch"><a name="lswitch"></a>Finding Inductive Invariants for Learning Switch</h2>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>We recommend ensuring that the downloaded file is correct. The SHA sum for the VM archive is <code class="highlighter-rouge">6d5d6b377f7a95a13507e57209c064080f273829</code>. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

    </div>

  </body>
</html>
